{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":42},"end":{"line":2,"column":60,"index":102}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":103},"end":{"line":3,"column":50,"index":153}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":154},"end":{"line":4,"column":44,"index":198}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"../components/NavigationThemeProvider","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":255},"end":{"line":6,"column":80,"index":335}}],"key":"Kh3aWfIsZYS+yQCrGKJgtZnYeog=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/_layout.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return RootLayout;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoRouter = require(_dependencyMap[1], \"expo-router\");\n  var _storeAuthStore = require(_dependencyMap[2], \"../store/authStore\");\n  var _utilsApi = require(_dependencyMap[3], \"../utils/api\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[4], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[5], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _componentsNavigationThemeProvider = require(_dependencyMap[6], \"../components/NavigationThemeProvider\");\n  var _reactJsxDevRuntime = require(_dependencyMap[7], \"react/jsx-dev-runtime\");\n  function RootLayout() {\n    const {\n      user,\n      isLoading,\n      setUser,\n      setLoading,\n      sessionToken\n    } = (0, _storeAuthStore.useAuthStore)();\n    const segments = (0, _expoRouter.useSegments)();\n    const router = (0, _expoRouter.useRouter)();\n    (0, _react.useEffect)(() => {\n      // Check for existing session\n      const checkSession = async () => {\n        try {\n          // Check URL for session_id from Emergent Auth\n          if (false) {\n            const hash = window.location.hash;\n            const params = new URLSearchParams(hash.substring(1));\n            const sessionId = params.get('session_id');\n            if (sessionId) {\n              // Process session_id\n              // This will be handled by the login screen\n              setLoading(false);\n              return;\n            }\n          }\n\n          // Check if we have a session token\n          if (sessionToken) {\n            (0, _utilsApi.setAuthToken)(sessionToken);\n          }\n          setLoading(false);\n        } catch (error) {\n          console.error('Session check error:', error);\n          setLoading(false);\n        }\n      };\n      checkSession();\n    }, []);\n    (0, _react.useEffect)(() => {\n      if (isLoading) return;\n      const inAuthGroup = segments[0] === '(auth)';\n      if (!user && !inAuthGroup) {\n        // Redirect to login\n        router.replace('/(auth)/login');\n      } else if (user && inAuthGroup) {\n        // Redirect based on role\n        if (user.role === 'customer') {\n          router.replace('/(customer)');\n        } else if (user.role === 'restaurant') {\n          router.replace('/(restaurant)');\n        } else if (user.role === 'rider') {\n          router.replace('/(rider)');\n        }\n      }\n    }, [user, segments, isLoading]);\n    if (isLoading) {\n      return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        children: /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n          size: \"large\",\n          color: \"#FF6B6B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this);\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_componentsNavigationThemeProvider.NavigationThemeProvider, {\n      children: /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack, {\n        screenOptions: {\n          headerShown: false\n        },\n        children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"(auth)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"(customer)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"(restaurant)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"(rider)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }, this);\n  }\n});","lineCount":147,"map":[[13,2,8,15,"Object"],[13,8,8,15],[13,9,8,15,"defineProperty"],[13,23,8,15],[13,24,8,15,"exports"],[13,31,8,15],[14,4,8,15,"enumerable"],[14,14,8,15],[15,4,8,15,"get"],[15,7,8,15],[15,18,8,15,"get"],[15,19,8,15],[16,6,8,15],[16,13,8,15,"RootLayout"],[16,23,8,15],[17,4,8,15],[18,2,8,15],[19,2,1,0],[19,6,1,0,"_react"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,2,0],[20,6,2,0,"_expoRouter"],[20,17,2,0],[20,20,2,0,"require"],[20,27,2,0],[20,28,2,0,"_dependencyMap"],[20,42,2,0],[21,2,3,0],[21,6,3,0,"_storeAuthStore"],[21,21,3,0],[21,24,3,0,"require"],[21,31,3,0],[21,32,3,0,"_dependencyMap"],[21,46,3,0],[22,2,4,0],[22,6,4,0,"_utilsApi"],[22,15,4,0],[22,18,4,0,"require"],[22,25,4,0],[22,26,4,0,"_dependencyMap"],[22,40,4,0],[23,2,4,44],[23,6,4,44,"_reactNativeWebDistExportsView"],[23,36,4,44],[23,39,4,44,"require"],[23,46,4,44],[23,47,4,44,"_dependencyMap"],[23,61,4,44],[24,2,4,44],[24,6,4,44,"View"],[24,10,4,44],[24,13,4,44,"_interopDefault"],[24,28,4,44],[24,29,4,44,"_reactNativeWebDistExportsView"],[24,59,4,44],[25,2,4,44],[25,6,4,44,"_reactNativeWebDistExportsActivityIndicator"],[25,49,4,44],[25,52,4,44,"require"],[25,59,4,44],[25,60,4,44,"_dependencyMap"],[25,74,4,44],[26,2,4,44],[26,6,4,44,"ActivityIndicator"],[26,23,4,44],[26,26,4,44,"_interopDefault"],[26,41,4,44],[26,42,4,44,"_reactNativeWebDistExportsActivityIndicator"],[26,85,4,44],[27,2,6,0],[27,6,6,0,"_componentsNavigationThemeProvider"],[27,40,6,0],[27,43,6,0,"require"],[27,50,6,0],[27,51,6,0,"_dependencyMap"],[27,65,6,0],[28,2,6,80],[28,6,6,80,"_reactJsxDevRuntime"],[28,25,6,80],[28,28,6,80,"require"],[28,35,6,80],[28,36,6,80,"_dependencyMap"],[28,50,6,80],[29,2,8,15],[29,11,8,24,"RootLayout"],[29,21,8,34,"RootLayout"],[29,22,8,34],[29,24,8,37],[30,4,9,2],[30,10,9,8],[31,6,9,10,"user"],[31,10,9,14],[32,6,9,16,"isLoading"],[32,15,9,25],[33,6,9,27,"setUser"],[33,13,9,34],[34,6,9,36,"setLoading"],[34,16,9,46],[35,6,9,48,"sessionToken"],[36,4,9,61],[36,5,9,62],[36,8,9,65],[36,12,9,65,"useAuthStore"],[36,27,9,77],[36,28,9,77,"useAuthStore"],[36,40,9,77],[36,42,9,78],[36,43,9,79],[37,4,10,2],[37,10,10,8,"segments"],[37,18,10,16],[37,21,10,19],[37,25,10,19,"useSegments"],[37,36,10,30],[37,37,10,30,"useSegments"],[37,48,10,30],[37,50,10,31],[37,51,10,32],[38,4,11,2],[38,10,11,8,"router"],[38,16,11,14],[38,19,11,17],[38,23,11,17,"useRouter"],[38,34,11,26],[38,35,11,26,"useRouter"],[38,44,11,26],[38,46,11,27],[38,47,11,28],[39,4,13,2],[39,8,13,2,"useEffect"],[39,14,13,11],[39,15,13,11,"useEffect"],[39,24,13,11],[39,26,13,12],[39,32,13,18],[40,6,14,4],[41,6,15,4],[41,12,15,10,"checkSession"],[41,24,15,22],[41,27,15,25],[41,33,15,25,"checkSession"],[41,34,15,25],[41,39,15,37],[42,8,16,6],[42,12,16,10],[43,10,17,8],[44,10,18,8],[44,21,18,43],[45,12,19,10],[45,18,19,16,"hash"],[45,22,19,20],[45,25,19,23,"window"],[45,31,19,29],[45,32,19,30,"location"],[45,40,19,38],[45,41,19,39,"hash"],[45,45,19,43],[46,12,20,10],[46,18,20,16,"params"],[46,24,20,22],[46,27,20,25],[46,31,20,29,"URLSearchParams"],[46,46,20,44],[46,47,20,45,"hash"],[46,51,20,49],[46,52,20,50,"substring"],[46,61,20,59],[46,62,20,60],[46,63,20,61],[46,64,20,62],[46,65,20,63],[47,12,21,10],[47,18,21,16,"sessionId"],[47,27,21,25],[47,30,21,28,"params"],[47,36,21,34],[47,37,21,35,"get"],[47,40,21,38],[47,41,21,39],[47,53,21,51],[47,54,21,52],[48,12,23,10],[48,16,23,14,"sessionId"],[48,25,23,23],[48,27,23,25],[49,14,24,12],[50,14,25,12],[51,14,26,12,"setLoading"],[51,24,26,22],[51,25,26,23],[51,30,26,28],[51,31,26,29],[52,14,27,12],[53,12,28,10],[54,10,29,8],[56,10,31,8],[57,10,32,8],[57,14,32,12,"sessionToken"],[57,26,32,24],[57,28,32,26],[58,12,33,10],[58,16,33,10,"setAuthToken"],[58,25,33,22],[58,26,33,22,"setAuthToken"],[58,38,33,22],[58,40,33,23,"sessionToken"],[58,52,33,35],[58,53,33,36],[59,10,34,8],[60,10,36,8,"setLoading"],[60,20,36,18],[60,21,36,19],[60,26,36,24],[60,27,36,25],[61,8,37,6],[61,9,37,7],[61,10,37,8],[61,17,37,15,"error"],[61,22,37,20],[61,24,37,22],[62,10,38,8,"console"],[62,17,38,15],[62,18,38,16,"error"],[62,23,38,21],[62,24,38,22],[62,46,38,44],[62,48,38,46,"error"],[62,53,38,51],[62,54,38,52],[63,10,39,8,"setLoading"],[63,20,39,18],[63,21,39,19],[63,26,39,24],[63,27,39,25],[64,8,40,6],[65,6,41,4],[65,7,41,5],[66,6,43,4,"checkSession"],[66,18,43,16],[66,19,43,17],[66,20,43,18],[67,4,44,2],[67,5,44,3],[67,7,44,5],[67,9,44,7],[67,10,44,8],[68,4,46,2],[68,8,46,2,"useEffect"],[68,14,46,11],[68,15,46,11,"useEffect"],[68,24,46,11],[68,26,46,12],[68,32,46,18],[69,6,47,4],[69,10,47,8,"isLoading"],[69,19,47,17],[69,21,47,19],[70,6,49,4],[70,12,49,10,"inAuthGroup"],[70,23,49,21],[70,26,49,24,"segments"],[70,34,49,32],[70,35,49,33],[70,36,49,34],[70,37,49,35],[70,42,49,40],[70,50,49,48],[71,6,51,4],[71,10,51,8],[71,11,51,9,"user"],[71,15,51,13],[71,19,51,17],[71,20,51,18,"inAuthGroup"],[71,31,51,29],[71,33,51,31],[72,8,52,6],[73,8,53,6,"router"],[73,14,53,12],[73,15,53,13,"replace"],[73,22,53,20],[73,23,53,21],[73,38,53,36],[73,39,53,37],[74,6,54,4],[74,7,54,5],[74,13,54,11],[74,17,54,15,"user"],[74,21,54,19],[74,25,54,23,"inAuthGroup"],[74,36,54,34],[74,38,54,36],[75,8,55,6],[76,8,56,6],[76,12,56,10,"user"],[76,16,56,14],[76,17,56,15,"role"],[76,21,56,19],[76,26,56,24],[76,36,56,34],[76,38,56,36],[77,10,57,8,"router"],[77,16,57,14],[77,17,57,15,"replace"],[77,24,57,22],[77,25,57,23],[77,38,57,36],[77,39,57,37],[78,8,58,6],[78,9,58,7],[78,15,58,13],[78,19,58,17,"user"],[78,23,58,21],[78,24,58,22,"role"],[78,28,58,26],[78,33,58,31],[78,45,58,43],[78,47,58,45],[79,10,59,8,"router"],[79,16,59,14],[79,17,59,15,"replace"],[79,24,59,22],[79,25,59,23],[79,40,59,38],[79,41,59,39],[80,8,60,6],[80,9,60,7],[80,15,60,13],[80,19,60,17,"user"],[80,23,60,21],[80,24,60,22,"role"],[80,28,60,26],[80,33,60,31],[80,40,60,38],[80,42,60,40],[81,10,61,8,"router"],[81,16,61,14],[81,17,61,15,"replace"],[81,24,61,22],[81,25,61,23],[81,35,61,33],[81,36,61,34],[82,8,62,6],[83,6,63,4],[84,4,64,2],[84,5,64,3],[84,7,64,5],[84,8,64,6,"user"],[84,12,64,10],[84,14,64,12,"segments"],[84,22,64,20],[84,24,64,22,"isLoading"],[84,33,64,31],[84,34,64,32],[84,35,64,33],[85,4,66,2],[85,8,66,6,"isLoading"],[85,17,66,15],[85,19,66,17],[86,6,67,4],[86,26,68,6],[86,30,68,6,"_reactJsxDevRuntime"],[86,49,68,6],[86,50,68,6,"jsxDEV"],[86,56,68,6],[86,58,68,7,"View"],[86,62,68,11],[86,63,68,11,"default"],[86,70,68,11],[87,8,68,12,"style"],[87,13,68,17],[87,15,68,19],[88,10,68,21,"flex"],[88,14,68,25],[88,16,68,27],[88,17,68,28],[89,10,68,30,"justifyContent"],[89,24,68,44],[89,26,68,46],[89,34,68,54],[90,10,68,56,"alignItems"],[90,20,68,66],[90,22,68,68],[91,8,68,77],[91,9,68,79],[92,8,68,79,"children"],[92,16,68,79],[92,31,69,8],[92,35,69,8,"_reactJsxDevRuntime"],[92,54,69,8],[92,55,69,8,"jsxDEV"],[92,61,69,8],[92,63,69,9,"ActivityIndicator"],[92,80,69,26],[92,81,69,26,"default"],[92,88,69,26],[93,10,69,27,"size"],[93,14,69,31],[93,16,69,32],[93,23,69,39],[94,10,69,40,"color"],[94,15,69,45],[94,17,69,46],[95,8,69,55],[96,10,69,55,"fileName"],[96,18,69,55],[96,20,69,55,"_jsxFileName"],[96,32,69,55],[97,10,69,55,"lineNumber"],[97,20,69,55],[98,10,69,55,"columnNumber"],[98,22,69,55],[99,8,69,55],[99,15,69,57],[100,6,69,58],[101,8,69,58,"fileName"],[101,16,69,58],[101,18,69,58,"_jsxFileName"],[101,30,69,58],[102,8,69,58,"lineNumber"],[102,18,69,58],[103,8,69,58,"columnNumber"],[103,20,69,58],[104,6,69,58],[104,13,70,12],[104,14,70,13],[105,4,72,2],[106,4,74,2],[106,24,75,4],[106,28,75,4,"_reactJsxDevRuntime"],[106,47,75,4],[106,48,75,4,"jsxDEV"],[106,54,75,4],[106,56,75,5,"_componentsNavigationThemeProvider"],[106,90,75,28],[106,91,75,28,"NavigationThemeProvider"],[106,114,75,28],[107,6,75,28,"children"],[107,14,75,28],[107,29,76,6],[107,33,76,6,"_reactJsxDevRuntime"],[107,52,76,6],[107,53,76,6,"jsxDEV"],[107,59,76,6],[107,61,76,7,"_expoRouter"],[107,72,76,12],[107,73,76,12,"Stack"],[107,78,76,12],[108,8,76,13,"screenOptions"],[108,21,76,26],[108,23,76,28],[109,10,76,30,"headerShown"],[109,21,76,41],[109,23,76,43],[110,8,76,49],[110,9,76,51],[111,8,76,51,"children"],[111,16,76,51],[111,32,77,8],[111,36,77,8,"_reactJsxDevRuntime"],[111,55,77,8],[111,56,77,8,"jsxDEV"],[111,62,77,8],[111,64,77,9,"_expoRouter"],[111,75,77,14],[111,76,77,14,"Stack"],[111,81,77,14],[111,82,77,15,"Screen"],[111,88,77,21],[112,10,77,22,"name"],[112,14,77,26],[112,16,77,27],[113,8,77,35],[114,10,77,35,"fileName"],[114,18,77,35],[114,20,77,35,"_jsxFileName"],[114,32,77,35],[115,10,77,35,"lineNumber"],[115,20,77,35],[116,10,77,35,"columnNumber"],[116,22,77,35],[117,8,77,35],[117,15,77,37],[117,16,77,38],[117,31,78,8],[117,35,78,8,"_reactJsxDevRuntime"],[117,54,78,8],[117,55,78,8,"jsxDEV"],[117,61,78,8],[117,63,78,9,"_expoRouter"],[117,74,78,14],[117,75,78,14,"Stack"],[117,80,78,14],[117,81,78,15,"Screen"],[117,87,78,21],[118,10,78,22,"name"],[118,14,78,26],[118,16,78,27],[119,8,78,39],[120,10,78,39,"fileName"],[120,18,78,39],[120,20,78,39,"_jsxFileName"],[120,32,78,39],[121,10,78,39,"lineNumber"],[121,20,78,39],[122,10,78,39,"columnNumber"],[122,22,78,39],[123,8,78,39],[123,15,78,41],[123,16,78,42],[123,31,79,8],[123,35,79,8,"_reactJsxDevRuntime"],[123,54,79,8],[123,55,79,8,"jsxDEV"],[123,61,79,8],[123,63,79,9,"_expoRouter"],[123,74,79,14],[123,75,79,14,"Stack"],[123,80,79,14],[123,81,79,15,"Screen"],[123,87,79,21],[124,10,79,22,"name"],[124,14,79,26],[124,16,79,27],[125,8,79,41],[126,10,79,41,"fileName"],[126,18,79,41],[126,20,79,41,"_jsxFileName"],[126,32,79,41],[127,10,79,41,"lineNumber"],[127,20,79,41],[128,10,79,41,"columnNumber"],[128,22,79,41],[129,8,79,41],[129,15,79,43],[129,16,79,44],[129,31,80,8],[129,35,80,8,"_reactJsxDevRuntime"],[129,54,80,8],[129,55,80,8,"jsxDEV"],[129,61,80,8],[129,63,80,9,"_expoRouter"],[129,74,80,14],[129,75,80,14,"Stack"],[129,80,80,14],[129,81,80,15,"Screen"],[129,87,80,21],[130,10,80,22,"name"],[130,14,80,26],[130,16,80,27],[131,8,80,36],[132,10,80,36,"fileName"],[132,18,80,36],[132,20,80,36,"_jsxFileName"],[132,32,80,36],[133,10,80,36,"lineNumber"],[133,20,80,36],[134,10,80,36,"columnNumber"],[134,22,80,36],[135,8,80,36],[135,15,80,38],[135,16,80,39],[136,6,80,39],[137,8,80,39,"fileName"],[137,16,80,39],[137,18,80,39,"_jsxFileName"],[137,30,80,39],[138,8,80,39,"lineNumber"],[138,18,80,39],[139,8,80,39,"columnNumber"],[139,20,80,39],[140,6,80,39],[140,13,81,13],[141,4,81,14],[142,6,81,14,"fileName"],[142,14,81,14],[142,16,81,14,"_jsxFileName"],[142,28,81,14],[143,6,81,14,"lineNumber"],[143,16,81,14],[144,6,81,14,"columnNumber"],[144,18,81,14],[145,4,81,14],[145,11,82,29],[145,12,82,30],[146,2,84,0],[147,0,84,1],[147,3]],"functionMap":{"names":["<global>","RootLayout","useEffect$argument_0","checkSession"],"mappings":"AAA;eCO;YCK;yBCE;KD0B;GDG;YCE;GDkB;CDoB"},"hasCjsExports":false},"type":"js/module"}]}