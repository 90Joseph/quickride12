{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":42},"end":{"line":2,"column":60,"index":102}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":103},"end":{"line":3,"column":50,"index":153}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":154},"end":{"line":4,"column":44,"index":198}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/_layout.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return RootLayout;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoRouter = require(_dependencyMap[1], \"expo-router\");\n  var _storeAuthStore = require(_dependencyMap[2], \"../store/authStore\");\n  var _utilsApi = require(_dependencyMap[3], \"../utils/api\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[4], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[5], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _reactJsxDevRuntime = require(_dependencyMap[6], \"react/jsx-dev-runtime\");\n  function RootLayout() {\n    _s();\n    const {\n      user,\n      isLoading,\n      setUser,\n      setLoading,\n      sessionToken\n    } = (0, _storeAuthStore.useAuthStore)();\n    const segments = (0, _expoRouter.useSegments)();\n    const router = (0, _expoRouter.useRouter)();\n    (0, _react.useEffect)(() => {\n      // Check for existing session\n      const checkSession = async () => {\n        try {\n          // Check URL for session_id from Emergent Auth\n          if (typeof window !== 'undefined') {\n            const hash = window.location.hash;\n            const params = new URLSearchParams(hash.substring(1));\n            const sessionId = params.get('session_id');\n            if (sessionId) {\n              // Process session_id\n              // This will be handled by the login screen\n              setLoading(false);\n              return;\n            }\n          }\n\n          // Check if we have a session token\n          if (sessionToken) {\n            (0, _utilsApi.setAuthToken)(sessionToken);\n          }\n          setLoading(false);\n        } catch (error) {\n          console.error('Session check error:', error);\n          setLoading(false);\n        }\n      };\n      checkSession();\n    }, []);\n    (0, _react.useEffect)(() => {\n      if (isLoading) return;\n      const inAuthGroup = segments[0] === '(auth)';\n      if (!user && !inAuthGroup) {\n        // Redirect to login\n        router.replace('/(auth)/login');\n      } else if (user && inAuthGroup) {\n        // Redirect based on role\n        if (user.role === 'customer') {\n          router.replace('/(customer)');\n        } else if (user.role === 'restaurant') {\n          router.replace('/(restaurant)');\n        } else if (user.role === 'rider') {\n          router.replace('/(rider)');\n        }\n      }\n    }, [user, segments, isLoading]);\n    if (isLoading) {\n      return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        children: /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n          size: \"large\",\n          color: \"#FF6B6B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this);\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack, {\n      screenOptions: {\n        headerShown: false\n      },\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n        name: \"(auth)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n        name: \"(customer)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n        name: \"(restaurant)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n        name: \"(rider)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }, this);\n  }\n  _s(RootLayout, \"lRJh0AaiYT2gypriqLGPO5laB1Y=\", false, function () {\n    return [_storeAuthStore.useAuthStore, _expoRouter.useSegments, _expoRouter.useRouter];\n  });\n  _c = RootLayout;\n  var _c;\n  $RefreshReg$(_c, \"RootLayout\");\n});","lineCount":148,"map":[[14,2,7,15,"Object"],[14,8,7,15],[14,9,7,15,"defineProperty"],[14,23,7,15],[14,24,7,15,"exports"],[14,31,7,15],[15,4,7,15,"enumerable"],[15,14,7,15],[16,4,7,15,"get"],[16,7,7,15],[16,18,7,15,"get"],[16,19,7,15],[17,6,7,15],[17,13,7,15,"RootLayout"],[17,23,7,15],[18,4,7,15],[19,2,7,15],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_expoRouter"],[21,17,2,0],[21,20,2,0,"require"],[21,27,2,0],[21,28,2,0,"_dependencyMap"],[21,42,2,0],[22,2,3,0],[22,6,3,0,"_storeAuthStore"],[22,21,3,0],[22,24,3,0,"require"],[22,31,3,0],[22,32,3,0,"_dependencyMap"],[22,46,3,0],[23,2,4,0],[23,6,4,0,"_utilsApi"],[23,15,4,0],[23,18,4,0,"require"],[23,25,4,0],[23,26,4,0,"_dependencyMap"],[23,40,4,0],[24,2,4,44],[24,6,4,44,"_reactNativeWebDistExportsView"],[24,36,4,44],[24,39,4,44,"require"],[24,46,4,44],[24,47,4,44,"_dependencyMap"],[24,61,4,44],[25,2,4,44],[25,6,4,44,"View"],[25,10,4,44],[25,13,4,44,"_interopDefault"],[25,28,4,44],[25,29,4,44,"_reactNativeWebDistExportsView"],[25,59,4,44],[26,2,4,44],[26,6,4,44,"_reactNativeWebDistExportsActivityIndicator"],[26,49,4,44],[26,52,4,44,"require"],[26,59,4,44],[26,60,4,44,"_dependencyMap"],[26,74,4,44],[27,2,4,44],[27,6,4,44,"ActivityIndicator"],[27,23,4,44],[27,26,4,44,"_interopDefault"],[27,41,4,44],[27,42,4,44,"_reactNativeWebDistExportsActivityIndicator"],[27,85,4,44],[28,2,4,44],[28,6,4,44,"_reactJsxDevRuntime"],[28,25,4,44],[28,28,4,44,"require"],[28,35,4,44],[28,36,4,44,"_dependencyMap"],[28,50,4,44],[29,2,7,15],[29,11,7,24,"RootLayout"],[29,21,7,34,"RootLayout"],[29,22,7,34],[29,24,7,37],[30,4,7,37,"_s"],[30,6,7,37],[31,4,8,2],[31,10,8,8],[32,6,8,10,"user"],[32,10,8,14],[33,6,8,16,"isLoading"],[33,15,8,25],[34,6,8,27,"setUser"],[34,13,8,34],[35,6,8,36,"setLoading"],[35,16,8,46],[36,6,8,48,"sessionToken"],[37,4,8,61],[37,5,8,62],[37,8,8,65],[37,12,8,65,"useAuthStore"],[37,27,8,77],[37,28,8,77,"useAuthStore"],[37,40,8,77],[37,42,8,78],[37,43,8,79],[38,4,9,2],[38,10,9,8,"segments"],[38,18,9,16],[38,21,9,19],[38,25,9,19,"useSegments"],[38,36,9,30],[38,37,9,30,"useSegments"],[38,48,9,30],[38,50,9,31],[38,51,9,32],[39,4,10,2],[39,10,10,8,"router"],[39,16,10,14],[39,19,10,17],[39,23,10,17,"useRouter"],[39,34,10,26],[39,35,10,26,"useRouter"],[39,44,10,26],[39,46,10,27],[39,47,10,28],[40,4,12,2],[40,8,12,2,"useEffect"],[40,14,12,11],[40,15,12,11,"useEffect"],[40,24,12,11],[40,26,12,12],[40,32,12,18],[41,6,13,4],[42,6,14,4],[42,12,14,10,"checkSession"],[42,24,14,22],[42,27,14,25],[42,33,14,25,"checkSession"],[42,34,14,25],[42,39,14,37],[43,8,15,6],[43,12,15,10],[44,10,16,8],[45,10,17,8],[45,14,17,12],[45,21,17,19,"window"],[45,27,17,25],[45,32,17,30],[45,43,17,41],[45,45,17,43],[46,12,18,10],[46,18,18,16,"hash"],[46,22,18,20],[46,25,18,23,"window"],[46,31,18,29],[46,32,18,30,"location"],[46,40,18,38],[46,41,18,39,"hash"],[46,45,18,43],[47,12,19,10],[47,18,19,16,"params"],[47,24,19,22],[47,27,19,25],[47,31,19,29,"URLSearchParams"],[47,46,19,44],[47,47,19,45,"hash"],[47,51,19,49],[47,52,19,50,"substring"],[47,61,19,59],[47,62,19,60],[47,63,19,61],[47,64,19,62],[47,65,19,63],[48,12,20,10],[48,18,20,16,"sessionId"],[48,27,20,25],[48,30,20,28,"params"],[48,36,20,34],[48,37,20,35,"get"],[48,40,20,38],[48,41,20,39],[48,53,20,51],[48,54,20,52],[49,12,22,10],[49,16,22,14,"sessionId"],[49,25,22,23],[49,27,22,25],[50,14,23,12],[51,14,24,12],[52,14,25,12,"setLoading"],[52,24,25,22],[52,25,25,23],[52,30,25,28],[52,31,25,29],[53,14,26,12],[54,12,27,10],[55,10,28,8],[57,10,30,8],[58,10,31,8],[58,14,31,12,"sessionToken"],[58,26,31,24],[58,28,31,26],[59,12,32,10],[59,16,32,10,"setAuthToken"],[59,25,32,22],[59,26,32,22,"setAuthToken"],[59,38,32,22],[59,40,32,23,"sessionToken"],[59,52,32,35],[59,53,32,36],[60,10,33,8],[61,10,35,8,"setLoading"],[61,20,35,18],[61,21,35,19],[61,26,35,24],[61,27,35,25],[62,8,36,6],[62,9,36,7],[62,10,36,8],[62,17,36,15,"error"],[62,22,36,20],[62,24,36,22],[63,10,37,8,"console"],[63,17,37,15],[63,18,37,16,"error"],[63,23,37,21],[63,24,37,22],[63,46,37,44],[63,48,37,46,"error"],[63,53,37,51],[63,54,37,52],[64,10,38,8,"setLoading"],[64,20,38,18],[64,21,38,19],[64,26,38,24],[64,27,38,25],[65,8,39,6],[66,6,40,4],[66,7,40,5],[67,6,42,4,"checkSession"],[67,18,42,16],[67,19,42,17],[67,20,42,18],[68,4,43,2],[68,5,43,3],[68,7,43,5],[68,9,43,7],[68,10,43,8],[69,4,45,2],[69,8,45,2,"useEffect"],[69,14,45,11],[69,15,45,11,"useEffect"],[69,24,45,11],[69,26,45,12],[69,32,45,18],[70,6,46,4],[70,10,46,8,"isLoading"],[70,19,46,17],[70,21,46,19],[71,6,48,4],[71,12,48,10,"inAuthGroup"],[71,23,48,21],[71,26,48,24,"segments"],[71,34,48,32],[71,35,48,33],[71,36,48,34],[71,37,48,35],[71,42,48,40],[71,50,48,48],[72,6,50,4],[72,10,50,8],[72,11,50,9,"user"],[72,15,50,13],[72,19,50,17],[72,20,50,18,"inAuthGroup"],[72,31,50,29],[72,33,50,31],[73,8,51,6],[74,8,52,6,"router"],[74,14,52,12],[74,15,52,13,"replace"],[74,22,52,20],[74,23,52,21],[74,38,52,36],[74,39,52,37],[75,6,53,4],[75,7,53,5],[75,13,53,11],[75,17,53,15,"user"],[75,21,53,19],[75,25,53,23,"inAuthGroup"],[75,36,53,34],[75,38,53,36],[76,8,54,6],[77,8,55,6],[77,12,55,10,"user"],[77,16,55,14],[77,17,55,15,"role"],[77,21,55,19],[77,26,55,24],[77,36,55,34],[77,38,55,36],[78,10,56,8,"router"],[78,16,56,14],[78,17,56,15,"replace"],[78,24,56,22],[78,25,56,23],[78,38,56,36],[78,39,56,37],[79,8,57,6],[79,9,57,7],[79,15,57,13],[79,19,57,17,"user"],[79,23,57,21],[79,24,57,22,"role"],[79,28,57,26],[79,33,57,31],[79,45,57,43],[79,47,57,45],[80,10,58,8,"router"],[80,16,58,14],[80,17,58,15,"replace"],[80,24,58,22],[80,25,58,23],[80,40,58,38],[80,41,58,39],[81,8,59,6],[81,9,59,7],[81,15,59,13],[81,19,59,17,"user"],[81,23,59,21],[81,24,59,22,"role"],[81,28,59,26],[81,33,59,31],[81,40,59,38],[81,42,59,40],[82,10,60,8,"router"],[82,16,60,14],[82,17,60,15,"replace"],[82,24,60,22],[82,25,60,23],[82,35,60,33],[82,36,60,34],[83,8,61,6],[84,6,62,4],[85,4,63,2],[85,5,63,3],[85,7,63,5],[85,8,63,6,"user"],[85,12,63,10],[85,14,63,12,"segments"],[85,22,63,20],[85,24,63,22,"isLoading"],[85,33,63,31],[85,34,63,32],[85,35,63,33],[86,4,65,2],[86,8,65,6,"isLoading"],[86,17,65,15],[86,19,65,17],[87,6,66,4],[87,26,67,6],[87,30,67,6,"_reactJsxDevRuntime"],[87,49,67,6],[87,50,67,6,"jsxDEV"],[87,56,67,6],[87,58,67,7,"View"],[87,62,67,11],[87,63,67,11,"default"],[87,70,67,11],[88,8,67,12,"style"],[88,13,67,17],[88,15,67,19],[89,10,67,21,"flex"],[89,14,67,25],[89,16,67,27],[89,17,67,28],[90,10,67,30,"justifyContent"],[90,24,67,44],[90,26,67,46],[90,34,67,54],[91,10,67,56,"alignItems"],[91,20,67,66],[91,22,67,68],[92,8,67,77],[92,9,67,79],[93,8,67,79,"children"],[93,16,67,79],[93,31,68,8],[93,35,68,8,"_reactJsxDevRuntime"],[93,54,68,8],[93,55,68,8,"jsxDEV"],[93,61,68,8],[93,63,68,9,"ActivityIndicator"],[93,80,68,26],[93,81,68,26,"default"],[93,88,68,26],[94,10,68,27,"size"],[94,14,68,31],[94,16,68,32],[94,23,68,39],[95,10,68,40,"color"],[95,15,68,45],[95,17,68,46],[96,8,68,55],[97,10,68,55,"fileName"],[97,18,68,55],[97,20,68,55,"_jsxFileName"],[97,32,68,55],[98,10,68,55,"lineNumber"],[98,20,68,55],[99,10,68,55,"columnNumber"],[99,22,68,55],[100,8,68,55],[100,15,68,57],[101,6,68,58],[102,8,68,58,"fileName"],[102,16,68,58],[102,18,68,58,"_jsxFileName"],[102,30,68,58],[103,8,68,58,"lineNumber"],[103,18,68,58],[104,8,68,58,"columnNumber"],[104,20,68,58],[105,6,68,58],[105,13,69,12],[105,14,69,13],[106,4,71,2],[107,4,73,2],[107,24,74,4],[107,28,74,4,"_reactJsxDevRuntime"],[107,47,74,4],[107,48,74,4,"jsxDEV"],[107,54,74,4],[107,56,74,5,"_expoRouter"],[107,67,74,10],[107,68,74,10,"Stack"],[107,73,74,10],[108,6,74,11,"screenOptions"],[108,19,74,24],[108,21,74,26],[109,8,74,28,"headerShown"],[109,19,74,39],[109,21,74,41],[110,6,74,47],[110,7,74,49],[111,6,74,49,"children"],[111,14,74,49],[111,30,75,6],[111,34,75,6,"_reactJsxDevRuntime"],[111,53,75,6],[111,54,75,6,"jsxDEV"],[111,60,75,6],[111,62,75,7,"_expoRouter"],[111,73,75,12],[111,74,75,12,"Stack"],[111,79,75,12],[111,80,75,13,"Screen"],[111,86,75,19],[112,8,75,20,"name"],[112,12,75,24],[112,14,75,25],[113,6,75,33],[114,8,75,33,"fileName"],[114,16,75,33],[114,18,75,33,"_jsxFileName"],[114,30,75,33],[115,8,75,33,"lineNumber"],[115,18,75,33],[116,8,75,33,"columnNumber"],[116,20,75,33],[117,6,75,33],[117,13,75,35],[117,14,75,36],[117,29,76,6],[117,33,76,6,"_reactJsxDevRuntime"],[117,52,76,6],[117,53,76,6,"jsxDEV"],[117,59,76,6],[117,61,76,7,"_expoRouter"],[117,72,76,12],[117,73,76,12,"Stack"],[117,78,76,12],[117,79,76,13,"Screen"],[117,85,76,19],[118,8,76,20,"name"],[118,12,76,24],[118,14,76,25],[119,6,76,37],[120,8,76,37,"fileName"],[120,16,76,37],[120,18,76,37,"_jsxFileName"],[120,30,76,37],[121,8,76,37,"lineNumber"],[121,18,76,37],[122,8,76,37,"columnNumber"],[122,20,76,37],[123,6,76,37],[123,13,76,39],[123,14,76,40],[123,29,77,6],[123,33,77,6,"_reactJsxDevRuntime"],[123,52,77,6],[123,53,77,6,"jsxDEV"],[123,59,77,6],[123,61,77,7,"_expoRouter"],[123,72,77,12],[123,73,77,12,"Stack"],[123,78,77,12],[123,79,77,13,"Screen"],[123,85,77,19],[124,8,77,20,"name"],[124,12,77,24],[124,14,77,25],[125,6,77,39],[126,8,77,39,"fileName"],[126,16,77,39],[126,18,77,39,"_jsxFileName"],[126,30,77,39],[127,8,77,39,"lineNumber"],[127,18,77,39],[128,8,77,39,"columnNumber"],[128,20,77,39],[129,6,77,39],[129,13,77,41],[129,14,77,42],[129,29,78,6],[129,33,78,6,"_reactJsxDevRuntime"],[129,52,78,6],[129,53,78,6,"jsxDEV"],[129,59,78,6],[129,61,78,7,"_expoRouter"],[129,72,78,12],[129,73,78,12,"Stack"],[129,78,78,12],[129,79,78,13,"Screen"],[129,85,78,19],[130,8,78,20,"name"],[130,12,78,24],[130,14,78,25],[131,6,78,34],[132,8,78,34,"fileName"],[132,16,78,34],[132,18,78,34,"_jsxFileName"],[132,30,78,34],[133,8,78,34,"lineNumber"],[133,18,78,34],[134,8,78,34,"columnNumber"],[134,20,78,34],[135,6,78,34],[135,13,78,36],[135,14,78,37],[136,4,78,37],[137,6,78,37,"fileName"],[137,14,78,37],[137,16,78,37,"_jsxFileName"],[137,28,78,37],[138,6,78,37,"lineNumber"],[138,16,78,37],[139,6,78,37,"columnNumber"],[139,18,78,37],[140,4,78,37],[140,11,79,11],[140,12,79,12],[141,2,81,0],[142,2,81,1,"_s"],[142,4,81,1],[142,5,7,24,"RootLayout"],[142,15,7,34],[143,4,7,34],[143,12,8,65,"useAuthStore"],[143,27,8,77],[143,28,8,77,"useAuthStore"],[143,40,8,77],[143,42,9,19,"useSegments"],[143,53,9,30],[143,54,9,30,"useSegments"],[143,65,9,30],[143,67,10,17,"useRouter"],[143,78,10,26],[143,79,10,26,"useRouter"],[143,88,10,26],[144,2,10,26],[145,2,10,26,"_c"],[145,4,10,26],[145,7,7,24,"RootLayout"],[145,17,7,34],[146,2,7,34],[146,6,7,34,"_c"],[146,8,7,34],[147,2,7,34,"$RefreshReg$"],[147,14,7,34],[147,15,7,34,"_c"],[147,17,7,34],[148,0,7,34],[148,3]],"functionMap":{"names":["<global>","RootLayout","useEffect$argument_0","checkSession"],"mappings":"AAA;eCM;YCK;yBCE;KD0B;GDG;YCE;GDkB;CDkB"},"hasCjsExports":false},"type":"js/module"}]}